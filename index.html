<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enga Veetu Company</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="data:;base64,=" />

    <style>
        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .company-name-animated {
            font-size: 24px; font-weight: 600; color: var(--color-primary, #2563eb);
            background: none !important; border: none !important; padding: 0 !important;
            animation: fadeInScale 0.8s ease-out, pulse 2s ease-in-out infinite;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: default; outline: none;
        }
        .company-name-animated:hover { color: var(--primary-light, #3b82f6); }
        
        .desktop-company-name {
            display: block;
        }

        @media (max-width: 1024px) {
            .desktop-company-name {
                display: none !important;
            }
        }

        @media (min-width: 1025px) {
            .mobile-header-left {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <p style="margin-top: 20px; color: var(--text-secondary);">Loading Premium Interface...</p>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-content">
            <!-- Mobile Menu Toggle + Company Name -->
            <div class="mobile-header-left">
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
                    <span class="menu-icon">
                        <span class="menu-line"></span>
                        <span class="menu-line"></span>
                    </span>
                </button>
                <div class="company-name-animated">Enga veetu company</div>
            </div>

            <!-- Desktop Company Name -->
            <div class="company-name-animated desktop-company-name">Enga veetu company</div>

            <div class="top-actions">
                <button class="btn btn-danger btn-small desktop-only" onclick="clearAllData()">
                    Clear All Data
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Side Menu -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
    <aside class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <h2 class="mobile-menu-title">Dashboard</h2>
            <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">
                <span class="close-icon">√ó</span>
            </button>
        </div>

        <div class="mobile-menu-stats">
            <div class="mobile-stat-card">
                <div class="mobile-stat-icon">üë•</div>
                <div class="mobile-stat-info">
                    <div class="mobile-stat-label">Total Workers</div>
                    <div class="mobile-stat-value" id="mobileTotalWorkers">0</div>
                </div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-icon">üì¶</div>
                <div class="mobile-stat-info">
                    <div class="mobile-stat-label">Today's Production</div>
                    <div class="mobile-stat-value" id="mobileTodayProduction">0</div>
                </div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-icon">üí∞</div>
                <div class="mobile-stat-info">
                    <div class="mobile-stat-label">Total Earnings</div>
                    <div class="mobile-stat-value" id="mobileTotalEarnings">‚Çπ0</div>
                </div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-icon">üöö</div>
                <div class="mobile-stat-info">
                    <div class="mobile-stat-label">Ready for Delivery</div>
                    <div class="mobile-stat-value" id="mobileReadyDelivery">0</div>
                </div>
            </div>
        </div>

        <nav class="mobile-menu-content">
            <div class="mobile-menu-section-title">Navigation</div>
            <ul class="mobile-menu-list">
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link active" onclick="switchTabMobile(event, this, 'workers')">
                        <span class="menu-emoji">üë•</span>
                        <span class="menu-label">Workers</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'overlock')">
                        <span class="menu-emoji">üßµ</span>
                        <span class="menu-label">Overlock Stitch</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'tassel')">
                        <span class="menu-emoji">‚ú®</span>
                        <span class="menu-label">Tassel Stitch</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'fold')">
                        <span class="menu-emoji">üì¶</span>
                        <span class="menu-label">Fold Entry</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'places')">
                        <span class="menu-emoji">üìç</span>
                        <span class="menu-label">Delivery Places</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'delivery')">
                        <span class="menu-emoji">üöö</span>
                        <span class="menu-label">Delivery</span>
                    </a>
                </li>
                <li class="mobile-menu-item">
                    <a href="#" class="mobile-menu-link" onclick="switchTabMobile(event, this, 'reports')">
                        <span class="menu-emoji">üìà</span>
                        <span class="menu-label">Reports</span>
                    </a>
                </li>
            </ul>
            <div class="mobile-menu-footer">
                <button class="btn btn-danger btn-large" onclick="clearAllData(); closeMobileMenu();">
                    Clear All Data
                </button>
            </div>
        </nav>
    </aside>

    <!-- Main Container -->
    <div class="container">
        <!-- Dashboard Stats (Desktop Only) -->
        <div class="dashboard-grid desktop-dashboard">
            <div class="stat-card">
                <div class="stat-label">Total Workers</div>
                <div class="stat-value" id="totalWorkers">0</div>
                <div class="stat-trend">All active workers</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Today's Completed Production</div>
                <div class="stat-value" id="todayProduction">0</div>
                <div class="stat-trend">pcs (All Stages Complete)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Earnings Today</div>
                <div class="stat-value" id="totalEarnings">‚Çπ0</div>
                <div class="stat-trend">All Workers</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ready for Delivery</div>
                <div class="stat-value" id="readyDelivery">0</div>
                <div class="stat-trend">Folded towels</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <!-- Desktop Tab Buttons -->
            <div class="tab-buttons desktop-tabs">
                <button class="tab-btn active" onclick="switchTab(this, 'workers')">üë• Workers</button>
                <button class="tab-btn" onclick="switchTab(this, 'overlock')">üßµ Overlock Stitch</button>
                <button class="tab-btn" onclick="switchTab(this, 'tassel')">‚ú® Tassel Stitch</button>
                <button class="tab-btn" onclick="switchTab(this, 'fold')">üì¶ Fold Entry</button>
                <button class="tab-btn" onclick="switchTab(this, 'places')">üìç Delivery Places</button>
                <button class="tab-btn" onclick="switchTab(this, 'delivery')">üöö Delivery</button>
                <button class="tab-btn" onclick="switchTab(this, 'reports')">üìà Reports</button>
            </div>

            <!-- Workers Tab -->
            <div class="tab-content active" id="workers">
                <div class="form-card">
                    <h3 class="section-header">üë• Workers Management</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Worker ID</label>
                            <input type="text" id="workerId" placeholder="EMP001">
                        </div>
                        <div class="form-group">
                            <label>Name (‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç)</label>
                            <input type="text" id="workerName" placeholder="Worker Name">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-large" onclick="addWorker()">Add Worker</button>
                </div>

                <div class="info-box">All Workers - ‡Æµ‡Øá‡Æ≤‡Øà‡ÆØ‡Ææ‡Æ≥‡Øç‡Æï‡Æ≥‡Øç</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead><tr><th>ID</th><th>Name</th><th>Status</th><th>Action</th></tr></thead>
                        <tbody id="workersTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Overlock Tab -->
            <div class="tab-content" id="overlock">
                <div class="form-card">
                    <h3 class="section-header">üßµ Overlock Stitch Entry</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="overlockDate" value="">
                        </div>
                        <div class="form-group">
                            <label>Worker (Any Worker)</label>
                            <select id="overlockWorker"><option>Select Worker</option></select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Towel Type (‡Æ§‡ØÅ‡Æ£‡Øç‡Æü‡ØÅ ‡Æµ‡Æï‡Øà)</label>
                            <input type="text" id="overlockTowelType" placeholder="e.g., Premium White">
                        </div>
                        <div class="form-group">
                            <label>Price (‚Çπ/‡Æ™‡ØÄ‡Æ∏‡Øç)</label>
                            <input type="number" id="overlockPrice" placeholder="0.00" step="0.01" value="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Quantity (pcs)</label>
                            <input type="number" id="overlockQty" placeholder="0" value="0">
                        </div>
                        <div class="form-group">
                            <label>Next Step (‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æ™‡Æü‡Æø)</label>
                            <select id="overlockNextStep">
                                <option value="Tassel">Go to Tassel Stitching</option>
                                <option value="Fold">Go Directly to Folding</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-large" onclick="addOverlockEntry()">Add Overlock Entry</button>
                </div>

                <div class="info-box">Today's Overlock Entries</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Worker</th><th>Towel Type</th><th>Qty</th><th>Rate (‚Çπ)</th>
                                <th>Amount (‚Çπ)</th><th>Next Step</th><th>Status</th><th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="overlockTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tassel Tab -->
            <div class="tab-content" id="tassel">
                <div class="form-card">
                    <h3 class="section-header">‚ú® Tassel Stitch Entry</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="tasselDate" value="" onchange="populateAvailableTowelsForTassel()">
                        </div>
                        <div class="form-group">
                            <label>Worker (Any Worker)</label>
                            <select id="tasselWorker"><option>Select Worker</option></select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Select Available Towel (from Overlock)</label>
                            <select id="tasselTowelSelect" onchange="updateTasselDetails()">
                                <option value="">No overlock towels available</option>
                            </select>
                            <span class="form-hint">Shows overlock towels waiting for tassel</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Towel Type (Auto-filled)</label>
                            <input type="text" id="tasselTowelType" readonly style="background:#f5f5f5;">
                        </div>
                        <div class="form-group">
                            <label>Previous Worker (Auto-filled)</label>
                            <input type="text" id="tasselPreviousWorker" readonly style="background:#f5f5f5;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Price (‚Çπ/‡Æ™‡ØÄ‡Æ∏‡Øç) - Manual Entry</label>
                            <input type="number" id="tasselPrice" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label>Available Qty (Auto-filled)</label>
                            <input type="number" id="tasselAvailableQty" readonly style="background:#f5f5f5;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Quantity to Tassel Stitch</label>
                            <input type="number" id="tasselQty" value="0">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-large" onclick="addTasselEntry()">Add Tassel Entry</button>
                </div>

                <div class="info-box">Today's Tassel Entries</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Worker</th><th>Towel Type</th><th>Qty</th><th>Rate (‚Çπ)</th>
                                <th>Amount (‚Çπ)</th><th>Status</th><th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="tasselTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Fold Tab -->
            <div class="tab-content" id="fold">
                <div class="form-card">
                    <h3 class="section-header">üì¶ Fold Entry</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="foldDate" value="" onchange="populateAvailableTowels()">
                        </div>
                        <div class="form-group">
                            <label>Worker (Any Worker)</label>
                            <select id="foldWorker"><option>Select Worker</option></select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Select Available Towel</label>
                            <select id="foldTowelSelect" onchange="updateFoldDetails()">
                                <option value="">No towels ready for folding</option>
                            </select>
                            <span class="form-hint">Shows towels ready for folding</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Towel Type (Auto-filled)</label>
                            <input type="text" id="foldTowelType" readonly style="background:#f5f5f5;">
                        </div>
                        <div class="form-group">
                            <label>Previous Worker (Auto-filled)</label>
                            <input type="text" id="foldPreviousWorker" readonly style="background:#f5f5f5;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Price (‚Çπ/‡Æ™‡ØÄ‡Æ∏‡Øç) - Manual Entry</label>
                            <input type="number" id="foldPrice" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label>Available Qty (Auto-filled)</label>
                            <input type="number" id="foldAvailableQty" readonly style="background:#f5f5f5;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Quantity to Fold</label>
                            <input type="number" id="foldQty" value="0">
                        </div>
                    </div>
                    <button class="btn btn-success btn-large" onclick="addFoldEntry()">Add Fold Entry</button>
                </div>

                <div class="info-box">Today's Fold Entries</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Worker</th><th>Towel Type</th><th>Qty</th><th>Rate (‚Çπ)</th>
                                <th>Amount (‚Çπ)</th><th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="foldTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Places Tab -->
            <div class="tab-content" id="places">
                <div class="form-card">
                    <h3 class="section-header">üìç Delivery Places Management</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Place ID</label>
                            <input type="text" id="placeId" placeholder="LOC001">
                        </div>
                        <div class="form-group">
                            <label>Place Name (‡Æá‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç)</label>
                            <input type="text" id="placeName" placeholder="Chennai, Coimbatore, etc.">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-large" onclick="addPlace()">Add Delivery Place</button>
                </div>

                <div class="info-box">All Delivery Places - ‡Æµ‡Æø‡Æ®‡Æø‡ÆØ‡Øã‡Æï ‡Æá‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead><tr><th>ID</th><th>Place Name</th><th>Status</th><th>Action</th></tr></thead>
                        <tbody id="placesTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Delivery Tab -->
            <div class="tab-content" id="delivery">
                <div class="form-card">
                    <h3 class="section-header">üöö Delivery Entry</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="deliveryDate" value="" onchange="populateFoldedTowels()">
                        </div>
                        <div class="form-group">
                            <label>Select Folded Towel Type</label>
                            <select id="deliveryTowelSelect" onchange="updateDeliveryDetails()">
                                <option value="">No folded towels available</option>
                            </select>
                            <span class="form-hint">Shows folded towels ready for delivery</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Available Quantity (Auto-filled)</label>
                            <input type="number" id="deliveryAvailableQty" readonly style="background:#f5f5f5;">
                        </div>
                        <div class="form-group">
                            <label>Quantity to Deliver (Manual Entry)</label>
                            <input type="number" id="deliveryQty" value="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Delivery Location (‡Æµ‡Æø‡Æ®‡Æø‡ÆØ‡Øã‡Æï ‡Æá‡Æü‡ÆÆ‡Øç)</label>
                            <select id="deliveryPlace"><option>Select Location</option></select>
                        </div>
                    </div>
                    <button class="btn btn-success btn-large" onclick="addDeliveryEntry()">Add Delivery Entry</button>
                </div>

                <div class="info-box">Today's Deliveries</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead><tr><th>Towel Type</th><th>Quantity</th><th>Delivery Place</th><th>Date</th><th>Action</th></tr></thead>
                        <tbody id="deliveryTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Reports Tab - WITH MONTH-WEEK SELECTOR -->
            <section id="reports" class="tab-content" role="tabpanel">
                <h2 class="section-header"><span class="header-icon">üìà</span> Reports</h2>
                <div class="form-card">
                    <div class="form-group">
                        <label>Report Type (‡ÆÖ‡Æ±‡Æø‡Æï‡Øç‡Æï‡Øà ‡Æµ‡Æï‡Øà)</label>
                        <select id="reportType" onchange="updateReportTypeUI()">
                            <option value="daily">Daily Report (‡Æ§‡Æø‡Æ©‡Æö‡Æ∞‡Æø)</option>
                            <option value="weekly">Weekly Report (‡Æµ‡Ææ‡Æ∞‡ÆÆ‡Øç)</option>
                            <option value="monthly">Monthly Report (‡ÆÆ‡Ææ‡Æ§‡ÆÆ‡Øç)</option>
                        </select>
                    </div>

                    <!-- Daily Selector -->
                    <div class="form-group" id="dateSelector" style="display: block;">
                        <label>Select Date</label>
                        <input type="date" id="reportDate" value="">
                    </div>

                    <!-- Weekly Selector - TWO STEPS -->
                    <div id="weeklySelectors" style="display: none;">
                        <div class="form-group">
                            <label>Step 1: Select Month (‡ÆÆ‡Ææ‡Æ§‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ)</label>
                            <select id="weekMonthSelect" onchange="updateWeeksForMonth()">
                                <option value="">Choose month first...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Step 2: Select Week (‡Æµ‡Ææ‡Æ∞‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ)</label>
                            <select id="weekSelect">
                                <option value="">Select month first...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Monthly Selector -->
                    <div class="form-group" id="monthSelector" style="display: none;">
                        <label>Select Month (‡ÆÆ‡Ææ‡Æ§‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ)</label>
                        <select id="monthSelect"><option value="">Loading months...</option></select>
                    </div>

                    <button class="btn btn-primary btn-large" onclick="generateReport()">üìä Generate Report</button>
                </div>

                <div id="reportOutput"></div>
            </section>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Firebase SDK (Compat version) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    
    <!-- Your JavaScript -->
    <script defer src="script.js"></script>
</body>
</html>
